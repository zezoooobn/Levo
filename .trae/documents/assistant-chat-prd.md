## 1. نظرة عامة على المنتج
مساعد أزياء تفاعلي (شات) بالعربية يقترح 2–3 إطلالات كاملة لكل رسالة مع روابط مباشرة لمنتجات المتجر وإمكانية الإضافة/الإزالة من المفضلة.
- يلتقط نية المستخدم (المناسبة، الستايل، الطقس، اللون، الميزانية، الجنس) ويطرح أسئلة متابعة عند نقص المعلومات.

## 2. المزايا الأساسية

### 2.1 أدوار المستخدم
| الدور | طريقة التسجيل | الصلاحيات الأساسية |
|------|----------------|---------------------|
| زائر | بدون تسجيل | تصفح المنتجات، استخدام الشات، رؤية الروابط |
| مستخدم مسجل | البريد/OTP | إدارة المفضلة، الاستئناف التلقائي للمحادثة، شراء المنتجات |

### 2.2 وحدات المزايا
متطلباتنا تتكون من الصفحات الأساسية التالية:
1. **صفحة مساعد الأزياء (شات)**: فقاعات المحادثة (user/assistant)، حقل إدخال + زر إرسال، توصيات 2–3 إطلالات، روابط المنتجات، زر قلب للمفضلة، حفظ واستئناف المحادثة، مؤشر تحميل، تمرير تلقائي لأسفل.
2. **صفحة تسجيل الدخول**: تسجيل/تسجيل دخول OTP والبريد، استهلاك عنصر المفضلة المؤجل pendingWishlistItem، إعادة التوجيه للصفحة الأصلية.
3. **صفحة تفاصيل المنتج**: عرض تفاصيل المنتج، زر قلب لتبديل المفضلة، روابط قادمة من الشات.

### 2.3 تفاصيل الصفحات
| اسم الصفحة | اسم الوحدة | وصف الميزة |
|-----------|------------|-------------|
| مساعد الأزياء (شات) | واجهة الشات | عرض الرسائل كبابلز حسب الدور، إدخال مع Enter للإرسال وShift+Enter لسطر جديد، تمرير تلقائي |
| مساعد الأزياء (شات) | فهم النية | تحليل نص المستخدم لاستخراج المناسبة/الستايل/الطقس/اللون/الميزانية/الجنس، طرح أسئلة متابعة عند النقص |
| مساعد الأزياء (شات) | التوصيات | توليد 2–3 إطلالات مرتبطة بمنتجات فعلية ضمن الميزانية، مع سبب مختصر لملاءمة الاختيار |
| مساعد الأزياء (شات) | روابط + قلب | إظهار اسم المنتج والسعر والرابط إلى /products/[id]، زر قلب: إضافة/إزالة من المفضلة، إدارة pendingWishlistItem عند عدم تسجيل الدخول |
| مساعد الأزياء (شات) | الحفظ المحلي | حفظ سجل الرسائل في localStorage بمفتاح "assistant-chat" واستئناف تلقائي عند فتح الصفحة |
| تسجيل الدخول | تدفق المصادقة | تسجيل/تسجيل دخول، استهلاك pendingWishlistItem ثم الإضافة تلقائيًا للمفضلة، إعادة التوجيه إلى الصفحة السابقة |
| تفاصيل المنتج | تبديل المفضلة | قلب يعمل بالتبديل (إضافة/إزالة)، التزامن مع حالة الشات عند العودة |

## 3. العملية الأساسية
- تدفق المحادثة: المستخدم يرسل رسالة → المساعد يستخلص النية (مع متابعة إن لزم) → توليد 2–3 إطلالات بروابط ومنتجات فعلية + نصيحة قصيرة → المستخدم يضغط على الروابط أو القلوب.
- تدفق المفضلة لغير المسجل: ضغط القلب أثناء عدم تسجيل الدخول → حفظ pendingWishlistItem → إعادة توجيه لصفحة تسجيل الدخول → بعد النجاح تُضاف تلقائيًا للمفضلة → العودة للشات أو المنتج.

```mermaid
graph TD
  A[الصفحة الرئيسية] --> B[مساعد الأزياء (شات)]
  B --> C[تفاصيل المنتج]
  B --> D[تسجيل الدخول (عند حفظ للمفضلة بدون تسجيل)]
  D --> B
  C --> B
```

## 4. تصميم واجهة المستخدم
### 4.1 أسلوب التصميم
- الألوان الأساسية: Primary #111827 (رمادي داكن) وAccent #ef4444 (أحمر القلب)، ثانوي #6b7280.
- الأزرار: مستديرة بحواف ناعمة، حالات hover/active واضحة.
- الخط: Arabic-friendly مثل "Tajawal" أو النظام، أحجام 14–16 للنص و18–20 للعناوين.
- التخطيط: بابلز محادثة داخل Card، شريط إدخال ثابت أسفل، رأس بسيط أعلى.
- الرموز: قلوب وأيقونات واضحة من Lucide، مع تسميات aria-label.

### 4.2 نظرة تصميم الصفحات
| اسم الصفحة | اسم الوحدة | عناصر الواجهة |
|-----------|------------|----------------|
| مساعد الأزياء (شات) | فقاعات الرسائل | بابلز بتمييز لوني بين المستخدم والمساعد؛ مسافات داخلية جيدة؛ روابط المنتجات كأزرار نصية |
| مساعد الأزياء (شات) | إدخال الرسالة | Input بعرض كامل + زر إرسال؛ Enter للإرسال؛ Badge للحالة (جارٍ التوليد) |
| مساعد الأزياء (شات) | قائمة التوصيات | بطاقات صغيرة لكل مظهر: اسم العناصر، الأسعار، روابط مباشرة، زر قلب لكل عنصر |
| تسجيل الدخول | نموذج | حقول بريد/OTP بسيطة؛ رسالة توضيحية عند العودة للمساعد |
| تفاصيل المنتج | بطاقة المنتج | صورة/اسم/سعر؛ زر قلب؛ رابط العودة |

### 4.3 الاستجابة
- Desktop-first مع توافق كامل للهواتف.
- تحسين اللمس للأزرار والقلب، وتباين مناسب للنصوص.
